# Инструкция по обновлению модулей

## Что нужно сделать

Необходимо обновить все модули обучения (BasicSecurityModule, PasswordSecurityModule, PhishingModule, WorkplaceSecurityModule), чтобы они использовали новую функцию `updateModuleProgress` для сохранения времени завершения модулей.

## Шаги

1. В каждом модуле импортируйте функцию `updateModuleProgress`:

```tsx
import { updateModuleProgress } from './ModuleProgress';
```

2. Замените существующую логику обновления прогресса в функциях модулей:

### Функция handleNextSlide

```tsx
const handleNextSlide = () => {
  // ... остальной код ...

  // Если это не последний слайд лекции
  if (currentSlide < lectureSlides.length - 1) {
    // Вычисляем прогресс лекции (до 50%)
    const lectureProgress = Math.round((currentSlide + 1) / lectureSlides.length * 50);
    
    // Обновляем прогресс без флага завершения
    updateModuleProgress(moduleId, lectureProgress);
  }
  
  // Если мы переходим к тесту
  if (currentSlide === lectureSlides.length - 1) {
    // Обновляем прогресс до 50%
    updateModuleProgress(moduleId, 50);
  }
};
```

### Функция handleOptionSelect

```tsx
const handleOptionSelect = (optionIndex) => {
  // ... остальной код ...

  // Если это последний вопрос
  if (currentSlide === totalSlides - 1) {
    // Вычисляем финальный прогресс
    const finalProgress = 50 + Math.round((score + (isCorrect ? 1 : 0)) / questions.length * 50);
    
    // Проверяем, все ли ответы правильные
    const allCorrect = score + (isCorrect ? 1 : 0) === questions.length;
    
    // Обновляем прогресс с флагом завершения, если все ответы правильные
    updateModuleProgress(moduleId, finalProgress, allCorrect);
  }
};
```

### Функция handleFinish

```tsx
const handleFinish = () => {
  // Если все ответы правильные, обновляем прогресс до 100% с флагом завершения
  if (score === questions.length) {
    updateModuleProgress(moduleId, 100, true);
  }
  
  // Переходим на главную страницу
  navigate('/');
};
```

## Идентификаторы модулей

Для каждого модуля используйте следующие идентификаторы:

- BasicSecurityModule: `basic-security`
- PasswordSecurityModule: `password-security`
- PhishingModule: `phishing`
- WorkplaceSecurityModule: `workplace-security`

## Проверка

После внесения изменений проверьте работу модулей:

1. Пройдите модуль полностью, ответив на все вопросы правильно
2. Перейдите в профиль и проверьте, что модуль отображается как завершенный
3. Проверьте, что в рейтинге пользователей отображается дата завершения модуля 